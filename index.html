<!DOCTYPE html>
<html>
	<head>
		<title>TinyMCE image gallery</title>
		<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>
	<body>
		<!-- NAVBAR -->
		<nav class="navbar navbar-default" id="top">
		  	<div class="container-fluid">
		    	<div class="collapse navbar-collapse">
			      	<ul class="nav navbar-nav">
				        <li class="active"><a href="#top">Top</a></li>
						<li><a href="#demo">Demo</a></li>
				        <li><a href="#html_code">HTML</a></li>
						<li><a href="#js_code">JavaScript</a></li>
						<li><a href="#css_code">CSS</a></li>
						<li><a href="#ajax_code">Load from server</a></li>
			      	</ul>
		    	</div>
		  	</div>
		</nav>
		<!-- INTRO -->
		<div class="jumbotron">
			<div class="container">
				<h1>Simple TinyMCE image gallery</h1>
	  		  	<p>
  			  		If you're looking for a free, simple and light image gallery, you're in the right place ! All you need to integrate the few lines of code is :
					<ul>
						<li>
							<b>Bootstrap</b>
						</li>
						<li>
							<b>Jquery</b>
						</li>
						<li>
							<b>TinyMCE</b> (obviously...)
						</li>
					</ul>
				</p>
				<p>
					How does it works ?
					<ul>
						<li>
							First, we have to add a button in the TinyMCE toolbar to open a <a href="http://getbootstrap.com/javascript/#modals">bootstrap modal</a>.
						</li>
						<li>
							Then, we need to load images and display them on the modal.
						</li>
						<li>
							To finish, we will make it possible to insert these images in the TinyMCE field.
						</li>
					</ul>
	  		  	</p>
				<p>
					For this demo, i work with static images. If you want to load images from your server with ajax, i give you a code example <a href="#ajax_code">in the bottom</a>.
				</p>
	  		  	<p>
	  			  	<a class="btn btn-primary btn-lg pull-right" href="#html_code">go to source code</a>
	  		  	</p>
			</div>
		</div>
		<!-- DEMO -->
		<div class="jumbotron" id="demo">
			<div class="container">
				<h2>Demo</h2>
				<p>
					<textarea></textarea>
				</p>
			</div>
		</div>
		<!-- MODAL for the demo-->
		<div class="modal fade" tabindex="-1" role="dialog" id="gallery-modal" aria-labelledby="gridSystemModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">Gallery</h4>
					</div>
					<div class="modal-body">
						<div id="gallery" class="row"></div>
					</div>
				</div>
			</div>
		</div>
		<!-- HTML -->
		<div class="jumbotron" id="html_code">
			<div class="container">
				<h2>HTML</h2>
				<p>
					The gallery modal :
<pre>
&lt;div class=&quot;modal fade&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot; id=&quot;gallery-modal&quot; aria-labelledby=&quot;gridSystemModalLabel&quot;&gt;
	&lt;div class=&quot;modal-dialog&quot; role=&quot;document&quot;&gt;
		&lt;div class=&quot;modal-content&quot;&gt;
			&lt;div class=&quot;modal-header&quot;&gt;
				&lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&times;&lt;/span&gt;&lt;/button&gt;
				&lt;h4 class=&quot;modal-title&quot;&gt;Gallery&lt;/h4&gt;
			&lt;/div&gt;
			&lt;div class=&quot;modal-body&quot;&gt;
				&lt;div id=&quot;gallery&quot; class=&quot;row&quot;&gt;&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;
</pre>
				</p>
			</div>
		</div>
		<!-- JS -->
		<div class="jumbotron" id="js_code">
			<div class="container">
				<h2>Javascript</h2>
				<p>
					Add the Gallery button and add listener on it to open the modal on click.
<pre>
tinymce.init({
    selector:'textarea',
    plugins: "code, link, image, textcolor, paste",
    toolbar: "undo redo | bold italic forecolor | bullist numlist | link image gallery",
    paste_as_text: true,
	setup: function (ed) {
    	ed.addButton('gallery', {
			text: 'Gallery',
         	onclick : function() {
            	 $('#gallery-modal').modal('show');
         	}
      });
    }
});
</pre>
				</p>
				<p>
					The way i added the images.
<pre>
for(let i = 1; i <=8; i++) {
	console.log("ok");
	$('#gallery').append('	&lt;div class=&quot;col-lg-3 col-md-4 col-xs-6 gallery-img-container&quot;&gt;
					&lt;img class=&quot;img-responsive gallery-img&quot; src=&quot;images/img' + i + '.png&quot;&gt;
				&lt;/div&gt;');
}
</pre>
				</p>
				<p>
					Add an listener on the images in the gallery. When we click on an image, add it to the textarea.
<pre>
$('.gallery-img').on('click', function() {
    $(tinymce.activeEditor.getBody()).find('p:last').append($(this).clone());
});
</pre>
				</p>
			</div>
		</div>
		<!-- CSS -->
		<div class="jumbotron" id="css_code">
			<div class="container">
				<h2>CSS</h2>
				<p>
<pre>
.gallery-img-container {
    margin-top: 15px;
}
.gallery-img:hover {
    cursor: pointer;
}
</pre>
				</p>
			</div>
		</div>
		<!-- AJAX -->
		<div class="jumbotron" id="ajax_code">
			<div class="container">
				<h2>AJAX</h2>
				<p>

				</p>
			</div>
		</div>
		<!-- FOOTER -->
		<footer>
		    <div class="footer" id="footer">
		        <div class="container">
		            <div class="row">
		                <div class="col-lg-3  col-md-3 col-sm-6 col-xs-12 ">
		                    <h3>Get the code on GitHub, see me on Twitter !</h3>
		                    <ul class="social">
		                        <li>
									<a href="#"><i class=" fa fa-github"></i></a>
								</li>
		                        <li>
									<a href="#"><i class="fa fa-twitter"></i></a>
								</li>
		                    </ul>
		                </div>
		            </div>
		        </div>
		    </div>
		    <div class="footer-bottom">
		        <div class="container">
		            <p class="pull-right">Antoine PRUDHOMME</p>
		        </div>
		    </div>
		</footer>
	</body>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="//cdn.tinymce.com/4/tinymce.min.js"></script>
  	<script type="text/javascript">

		$(document).ready(function() {

			// add images to gallery
			for(let i = 1; i <=8; i++) {
				console.log("ok");
				$('#gallery').append('<div class="col-lg-3 col-md-4 col-xs-6 gallery-img-container"><img class="img-responsive gallery-img" src="images/img' + i + '.png"></div>');
			}

			// event on images
			$('.gallery-img').on('click', function() {
	            $(tinymce.activeEditor.getBody()).find('p:last').append($(this).clone());
			});

			// build the tinymce textarea
			tinymce.init({
				selector:'textarea',
	            plugins: "code, link, image, textcolor, paste",
	            toolbar: "undo redo | bold italic forecolor | bullist numlist | link image gallery",
	            paste_as_text: true,
				setup: function (ed) {
			    	ed.addButton('gallery', {
						text: 'Gallery',
			         	onclick : function() {
			            	 $('#gallery-modal').modal('show');
			         	}
			      });
			    }
			});

		});

	</script>
</html>
